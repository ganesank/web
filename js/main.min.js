
var Compass = {
    init: function() {
        $(".triggers li").hover(function() {
            var e = $("a", this).data("title");
            $(".description").show().html(e)
        }, function() {
            $(".description").hide().html("")
        });
        $(".triggers li a").on("click", function() {
            var e = $(this).data("type")
        });
        $(".close-page").on("click", function() {
            $(".page").removeClass("show");
            $(".main").removeClass("hide");
            setTimeout(function() {
                $(".pages").hide()
            }, 300)
        });
        this.loader.start();
        this.arrange();
        this.preload();
        $.address.init(function(e) {
            $("a.self").not('[href^="http"]').address(function(e) {
                return $(this).attr("href").replace(location.pathname, "")
            })
        }).change(function(e) {
            var t = e.value.charAt(0) === "/" ? e.value.substr(1) : e.value;
            if (t)
                if ($('.pages[id="' + t + '"]').length) {
                    $("#swipebox-close").trigger("click");
                    $(".pages").hide();
                    $('.pages[id="' + t + '"]').show();
                    $(".page").addClass("show");
                    $(".main").addClass("hide")
                } else var n = setTimeout(function() {
                    if ($('.pages[id="' + t + '"]').length) {
                        $('.pages[id="' + t + '"]').show();
                        $(".page").addClass("show");
                        $(".main").addClass("hide");
                        clearInterval(n);
                        return
                    }
                }, 500);
            else {
                $("#swipebox-close").trigger("click");
                $(".page").removeClass("show");
                $(".main").removeClass("hide");
                setTimeout(function() {
                    $(".pages").hide()
                }, 300)
            }
        });
        var e = setInterval(function() {
            var t = 0;
            $('.triggers li a[data-type="page"]').each(function() {
                var e = $(this).attr("href");
                $('.pages[id="' + e + '"]').length || (t += 1)
            });
            if (!t) {
                $.event.trigger({
                    type: "Compass"
                });
                clearInterval(e)
            }
        }, 500)
    },
    arrange: function() {
        var e = $(".triggers li").size(),
            t = 360 / e;
        if ("TransitionEvent" in window || "WebKitTransitionEvent" in window || "OTransitionEvent" in window) {
            $(".triggers li").each(function(e) {
                var n = e + 1,
                    r = t * e,
                    i = 45 - r,
                    s = {
                        transform: "rotate(" + r + "deg) translate(0, -160px)",
                        "animation-delay": "1." + n + "s"
                    },
                    o = {
                        transform: "rotate(" + i + "deg)"
                    };
                $(this).css(s);
                $(this).find("i").css(o)
            });
            $(".main").addClass("animate")
        } else {
            var n = 175,
                r = 0,
                i = 2 * Math.PI / $(".triggers li").length;
            $(".triggers li").each(function(e) {
                var t = Math.round(100 + n * Math.cos(r) - $(this).width() / 2),
                    s = Math.round(100 + n * Math.sin(r) - $(this).height() / 2);
                $(this).css({
                    left: t + "px",
                    top: s + "px"
                });
                r += i
            });
            $(".triggers").css({
                "margin-left": "-100px",
                "margin-top": "-150px"
            });
            $(".triggers li").css("opacity", "1")
        }
    },
    preload: function() {
        $('.triggers li a[data-type="page"]').each(function(e) {
            var t = $(this).attr("href"),
                n = $(this).data("url") || t;
            $.get("assets/pages/" + n, function(e) {
                var n = $("<div />", {
                    "class": "pages",
                    id: t
                }).hide().html(e);
                $(".page .content").append(n)
            })
        });
        this.loader.stop()
    },
    loader: {
        start: function() {
            $(".loader").addClass("show")
        },
        stop: function() {
            $(".loader").removeClass("show")
        }
    }
};
Compass.init();
$(document).on("Compass", function(e) {
    $(".portfolio-item").swipebox();
   
});
